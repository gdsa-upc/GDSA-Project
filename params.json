{
  "name": "Terrassa’s Buildings",
  "tagline": "Projecte GDSA",
  "body": "Aquesta web neix a partir de l'assignatura Gestió i Distribució de Senyals Audiovisuals, on es planteja el desenvolupament d'un projecte que es basa en la cerca visual. Aquest projecte l'hem donat com a nom Terrassa's Buildings i els seus desenvolupadors són:\r\n\r\nNom i Cognom | Perfil Github | Perfil de LinkedIn\r\n------------ | ------------ | ------------\r\nMarta Barrachina | [Enllaç](https://github.com/Mmarta19) | [Enllaç](https://es.linkedin.com/in/marta-barrachina-234697117)\r\nMarta Coll| [Enllaç](https://github.com/MartaCollPol) | \r\nDavid Molina | [Enllaç](https://github.com/Damocle21) |\r\n\r\n\r\nEn concret Terrassa's Buildings és una plataforma que està implementada i desenvolupada amb el llenguatge Python. L'estructura del projecte es basa en:\r\n\r\n\r\n\r\n![Estructura](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/gh-pages/images/Captura%20de%20pantalla%202016-11-27%20a%20les%209.50.26.png?raw=true)\r\n\r\n\r\nPer entendre millor el projecta, s'ha dividit aquest en sessions. En cada una de les sessions s'explica en detall els passos que s'han portat a terme per obtenir l'objectiu final.\r\n\r\n\r\nSessions | informe\r\n------------ | -------------\r\nSessió 3 | [Extracció de característiques](https://docs.google.com/presentation/d/10qN_5L64CRrDN-KxAChikhTSHKhgo5Zdgb-cuL4wFAA/edit?usp=sharing)\r\nSessió 4 | [Sistema aleatori](https://docs.google.com/presentation/d/1BYy3HgLG6q_1lNq15vN7Gp8xHzMo9Y2DdIURvjgpsQ4/edit?usp=sharing)\r\n\r\n# [Sessió 3](https://docs.google.com/presentation/d/10qN_5L64CRrDN-KxAChikhTSHKhgo5Zdgb-cuL4wFAA/edit?usp=sharing)\r\n\r\nEn aquesta primera part del projecte s'ha realitzat una [Base de Dades](https://drive.google.com/file/d/0BwPBlegi0csQamhIU3YyT1o3ZGs/view?usp=sharing) amb 150 imatges diferents. Majoritàriament trobem imatges del Museu de la Ciència i la Tecnologia de Terrassa, del Mercat de la Independència. Encara així, en la base de dades també hi han imatges d'edificis desconeguts. Totes aquestes fotografies serviran d'entrenament al sistema. \r\n\r\n[MNACTEC](http://mnactec.cat/ca/) | [Mercat de la Independència](http://www.mercatdelaindependencia.cat/?doing_wp_cron=1479940928.3758389949798583984375)|Desconegut\r\n------------ | -------------  | -------------\r\n![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/gh-pages/images/1354-30624-16524.jpg?raw=true)| ![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/gh-pages/images/3311-27747-29929.jpg?raw=true) | ![] (https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/gh-pages/images/Desconegut_102.jpg?raw=true)\r\n \r\nEl sistema també farà servir 450 fotografies de diferents edificis de Terrassa, on la seva utilitat és de validació que serviran per evaluar el sistema. Aquestes imatges es poden trobar a la pàgina web del UPC [Terrassa Building 900](https://imatge.upc.edu/web/resources/terrassa-buildings-900).\r\n\r\nUn cop hem obtingut totes les imatges, és important fer una anotació d'aquestes per generar correctament la base de dades. El sistema d'anotació que s'ha utilitzat en aquest projecte és el següent:\r\n\r\n![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/gh-pages/images/Captura%20de%20pantalla%202016-11-27%20a%20les%2011.31.12.png?raw=true)\r\n\r\nTotes aquestes imatges s'han guardat en un arxiu [ZIP](https://drive.google.com/file/d/0BwPBlegi0csQamhIU3YyT1o3ZGs/view?usp=sharing).\r\n\r\nPel desenvolupament del projecta s'ha fet servir dos entorns de desenvolupament local.\r\n\r\n- [Canopy](https://www.enthought.com/products/canopy/): Entorn d'anàlisi de Python integral que proporciona més de 450 paquets de Python.\r\n\r\n- [Atom] (https://atom.io): Editor de text de software lliure en el que es pot treballar còmodament amb diferents idiomes de programació. Disposa de molts paquets descarregables que amplien les seves funcions com ara compiladors o personalitzadors. \r\n\r\nAmb aquestes dos entorns s'ha genera el primer script. Aquest es basa en l'extracció de punts d'interès d'una imatges. S'ha fet de dos extractors de característiques diferents, SURF, SIFT i ORB. A continuació podeu veure els codis realitzats agafant d'exemple, en els dos primers casos (SURF i SIFT), una imatge d'un tigre. En el cas d'ORB es fa servir una imatge de la nostre base de dades.\r\n\r\n* SURFT\r\n\r\n```Python\r\nimport numpy as np\r\nimport cv2\r\nimport matplotlib.pyplot as plt\r\n\r\n\r\nimg = cv2.imread('//Users/Marta/Desktop/fotos escriptori/TIGRE.JPG',0)\r\nsurf = cv2.SURF(4000)\r\nkp, des = surf.detectAndCompute(img, None)\r\nimg2 = cv2.drawKeypoints(img, kp, None, (255,0,0), 4)\r\nplt.imshow(img2),plt.show()\r\nprint len(kp)\r\n``` \r\n\r\n ![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/master/1--Keypoints/figure_1.png?raw=true)\r\n\r\n\r\nUtilitzant SURFT podem observar que ens detalla els contorns més pronunciats de la imatge.\r\n\r\n* SIFT \r\n\r\n```Python \r\nimport numpy as np\r\nimport cv2\r\nimport matplotlib.pyplot as plt\r\n\r\n\r\nimg = cv2.imread('//Users/Marta/Desktop/fotos escriptori/TIGRE.JPG',0)\r\nsift = cv2.SIFT(4000)\r\nkp, des = sift.detectAndCompute(img, None)\r\nimg2 = cv2.drawKeypoints(img, kp, None, (255,0,0), 4)\r\nplt.imshow(img2),plt.show()\r\nprint len(kp)\r\n```  \r\n\r\n![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/master/1--Keypoints/Imagen%201.png?raw=true)\r\n\r\n\r\nEn aquest cas com veiem a la imatge anterior, el resultat de l'extracció de característiques és més detallat. Sobretot en els canvis d'intensitat, és a dir, en els contorns.\r\n\r\n\r\n* ORB\r\n```Python\r\nimport numpy as np\r\nimport cv2\r\nfrom matplotlib import pyplot as plt\r\nimg = cv2.imread('/home/marta/Desktop/GDSA/Mercat.JPG',0)\r\n#linea que soluciona un bug de opencv\r\ncv2.ocl.setUseOpenCL(False)\r\n# Initiate STAR detector\r\norb = cv2.ORB_create(200000)\r\n\r\n# find the keypoints with ORB\r\nkp = orb.detect(img,None)\r\n\r\n# compute the descriptors with ORB\r\nkp, des = orb.compute(img, kp)\r\n\r\n# draw only keypoints location,not size and orientation\r\nimg2 = cv2.drawKeypoints(img,kp,None,color=(255,0,0), flags=0)\r\nplt.imshow(img2),plt.show()\r\n```\r\n\r\n![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/Marta-C/Mercat.png?raw=true)\r\n\r\nObservem de color vermell els punts d'interés que s'han trobat a la imatge que corresponen sobretot a contorns o zones amb variacions ràpides de color(com les lletres del cartell). En aquest cas, ens podem fixar que en un dels contorns de la imatge tenim un marca generada per la funda del telèfon amb el qual s'estava capturant la imatge. Això pot ser un cas real i és per aquest motiu que ho hem volgut fer servir.\r\n\r\nLes proves d'aquest primer script també s'han realitzat a [Jupyter](http://jupyter.org). Podeu veure tot el codi realitzat a [GitHub](https://github.com/gdsa-upc/Terrassa-s-Buildings/tree/master/1--Keypoints).\r\n\r\n# [Sessió 4](https://docs.google.com/presentation/d/1BYy3HgLG6q_1lNq15vN7Gp8xHzMo9Y2DdIURvjgpsQ4/edit?usp=sharing)\r\n\r\nLa primera part d'aquesta sessió seria:\r\n\r\n![](https://github.com/gdsa-upc/Terrassa-s-Buildings/blob/gh-pages/images/Captura%20de%20pantalla%202016-11-27%20a%20les%2012.26.07.png?raw=true)\r\n\r\nEn concret, en aquesta part del projecte la intenció es extreure les característiques de les imatges que formen part de la nostra [Base de Dades](https://drive.google.com/file/d/0BwPBlegi0csQamhIU3YyT1o3ZGs/view?usp=sharing). L'extractor ens retorna un vector de característiques per cada punt d'interès. \r\n\r\n```Python\r\n# -*- coding: utf-8 -*-\r\nimport os \r\n\r\ndef build_database (indir,outdir): #definim la funció\r\n    images = os.listdir(indir)  #llegeixo tots els noms dels fitxers del directori d'entrada i els guarda a imatges\r\n    outfile = open(outdir+'/ID.txt','w')   #crea el fitxer on escriu els id.\r\n    for file in images: #recorre tots els id i els escriu al fitxer\r\n        outfile.write(file[0:-4]+\"\\n\") \r\n        print(file)\r\n    outfile.close()#tanca el fitxer\r\n    \r\n\r\nruta1=os.path.dirname(os.path.abspath(__file__))+'/TerrassaBuildings900/val/images'\r\nruta2=os.path.dirname(os.path.abspath(__file__))+'/TerrassaBuildings900/train/images'\r\nsavepath1=os.path.dirname(os.path.abspath(__file__))+'/TerrassaBuildings900/val'\r\nsavepath2=os.path.dirname(os.path.abspath(__file__))+'/TerrassaBuildings900/train'\r\n\r\nbuild_database(ruta1,savepath1)\r\nbuild_database(ruta2,savepath2)\r\n```\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}